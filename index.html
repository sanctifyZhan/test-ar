
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>渋沢栄一ARークーポン</title>
    <script src="https://aframe.io/releases/1.0.0/aframe.min.js"></script>
    <!-- we import arjs version without NFT but with marker + location based support -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://unpkg.com/aframe-chromakey-material/dist/aframe-chromakey-material.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <link href="//fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>


        .overlay {
            position: fixed; /* Sit on top of the page content */
            /* Hidden by default */
            width: 100%; /* Full width (cover the whole page) */
            height: 100%; /* Full height (cover the whole page) */
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("whi.png");
            /*   background-color:#ffffff; Black background with opacity */
            z-index: 2; /* Specify a stack order in case you're using a different order for other elements */
            cursor: pointer; /* Add a pointer on hover */
        }

        .ui {
            position: absolute;
            z-index: 100;
            bottom: 0;
            left: 0;
            right: 0;
            width: 100%;
            height: auto;
            margin: 0;
            padding: 10px 15px 30px;
            text-align: center;
            box-sizing: border-box;
        }

            .ui a {
                display: inline-block;
                width: 60px;
                height: 60px;
                background-color: #ffffff;
                line-height: 100%;
                color: #303030;
                margin: 10px 3px;
                border-radius: 50%;
                position: relative;
            }

                .ui a i {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%,-50%);
                }

                .ui a:active {
                    color: #ff0000;
                }

                .ui a.disabled {
                    pointer-events: none;
                    color: #cccccc;
                }

        #snap {
            max-width: 100%;
            height: auto;
            display: block;
            visibility: hidden;
        }

            #snap.visible {
                visibility: visible;
            }

        div {
            opacity: 1;
            transition: opacity 500ms;
        }

            div.waa {
                opacity: 0;
            }
    </style>
</head>
<body style="margin : 0px; overflow: hidden;">
    <a-scene embedded arjs='debugUIEnabled:false; trackingMethod: best;'
             device-orientation-permission-ui="enabled: false"
             vr-mode-ui="enabled: false">

        <video id="vid"
               src="Dance.mp4"
               respose-type="arraybuffer"
               playsinline
               loop="true"
               crossorigin
               webkit-playsinline
               muted
               autoplay>
        </video>

        <a-marker type='pattern'
                  url='pattern-13.patt'
                  videohandler>
            <a-video src="#vid" position="-1 0 0" rotation="-90 0 0" scale="1 1 1" material="shader: chromakey; color: 0.1 0.9 0.2"></a-video>
        </a-marker>

        <a-entity camera></a-entity>

        <a-assets>
            <img id="my-image">

        </a-assets>

        <a-image src="#my-image"
                 position="0 1 -6" height="2" width="2" visible="false">
        </a-image>


    </a-scene>
    <div class="ui" id="container">
        <img id="snap">
        <a href="" id="take-photo" title="Take Photo"><i class="material-icons">photo_camera</i></a>
        <a id="download-photo" download="selfie.png" title="Save Photo" class="disabled" target="_blank"><i class="material-icons">file_download</i></a>

    </div>
</body>

<script>




    var image = document.querySelector('#snap');
    var video = document.getElementById("vid");
    video.play();

    var sceneElement = document.querySelector("a-scene");

    var myPix = new Array("ass/5.png", "ass/10.png", "ass/20.png", "ass/30.png");
    var take_photo_btn = document.querySelector('#take-photo');
 
    var download_photo_btn = document.querySelector('#download-photo');

    take_photo_btn.addEventListener("click", function (e) {

        var image1 = document.querySelector("a-image");
        var videotag = document.querySelector("video");
        image1.setAttribute('visible', true);
        videotag.pause();
        videotag.setAttribute("visible", false);
         alert("dis video");

        choosePic();
        take_photo_btn.classList.add("disabled");

        sceneElement.classList.add("overlay");
        //tu day
       
        var video = document.querySelector('a-scene');

        var snap = takeSnapshot(video);


        //スナップショット表示.
        image.setAttribute('src', snap);

        image.classList.add('visible');
        // 削除ボタンと保存ボタン有効
     
        download_photo_btn.classList.remove("disabled");

        // 保存ボタンにスナップショットを渡す
        download_photo_btn.href = snap;


    });


    function choosePic() {
        var randomNum = Math.floor(Math.random() * myPix.length);
        document.getElementById("my-image").src = myPix[randomNum];
    }


    alert("対象のコンテンツは、只今作成中です。8");

</script>
</html>